{% extends 'master.html' %}
{% load static %}

{% block title %}Manage Users{% endblock %}

{% block content %}
<div class="main-content">
  <h2 class="text-center mt-4">All Registered Users</h2>

  <div class="table-container" style="margin: 30px auto; width: 90%;">
    <table class="table table-striped table-bordered text-center">
      <thead class="table-danger">
        <tr>
          <th>ID</th>
          <th>Username</th>
          <th>Email</th>
          <th>Role</th>
          <th>Date Joined</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr id="user-row-{{ user.id }}">
          <td>{{ user.id }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.profile.role|title }}</td>
          <td>{{ user.date_joined|date:"M d, Y" }}</td>
          <td class="actions-cell">
            <a href="{% url 'edit_user' user.id %}" class="btn btn-sm btn-primary">Edit</a>
            <a href="{% url 'delete_user' user.id %}" 
               class="btn btn-sm btn-danger"
               onclick="return confirm('Are you sure you want to delete this user?');">
               Delete
            </a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="6">No users found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<style>
/* Table Card */
.table-container {
  background: #fff;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  font-family: 'Poppins', sans-serif;
}

/* Heading */
h2 {
  font-weight: 600;
  color: #b30000; /* blood red theme */
  font-family: 'Poppins', sans-serif;
}

/* Table */
.table td, .table th {
  vertical-align: middle;
}

/* Buttons */
.actions-cell {
  display: flex;
  justify-content: center;
  gap: 10px;
}

.btn {
  font-family: 'Poppins', sans-serif;
  border-radius: 8px;
  font-weight: 500;
  transition: all 0.3s ease;
}

.btn-primary {
  background-color: #007bff;
  border: none;
}

.btn-primary:hover {
  background-color: #0056b3;
}

.btn-danger {
  background-color: #dc3545;
  border: none;
}

.btn-danger:hover {
  background-color: #b52b38;
}

/* Table Header */
.table thead th {
  background-color: #ffcccc !important;
  color: #660000;
}
</style>
{% endblock %}
